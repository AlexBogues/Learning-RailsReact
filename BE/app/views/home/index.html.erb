<% content_for :title, "Bible Kaizen Application" %>

<div id="app">
  <div class="loading-container">
    <div class="loading-spinner"></div>
    <p>Processing email confirmation...</p>
  </div>
</div>

<script>
  // Check for Supabase authentication parameters in the URL hash
  function checkForAuthParams() {
    const hash = window.location.hash;
    const params = new URLSearchParams(hash.substring(1)); // Remove the # and parse
    
    if (params.get('access_token') && params.get('type') === 'signup') {
      // This is an email confirmation redirect from Supabase
      window.location.href = '/auth/confirm';
    } else {
      // No auth parameters, show default content
      document.getElementById('app').innerHTML = `
        <div class="welcome-container">
          <h1>Bible Kaizen Application API</h1>
          <p>Welcome to the Bible Kaizen Application backend API.</p>
        </div>
      `;
    }
  }
  
  // Run the check when the page loads
  document.addEventListener('DOMContentLoaded', checkForAuthParams);
</script>
